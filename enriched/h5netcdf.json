{
  "name": "h5netcdf",
  "summary": "netCDF4 via h5py",
  "language": "python",
  "tags": [
    "data",
    "math",
    "web"
  ],
  "chunks": [
    {
      "chunk_id": "h5netcdf::chunk_0",
      "text": "h5netcdf\n========\n\nA Python interface for the `netCDF4`_ file-format that reads and writes local or\nremote HDF5 files directly via `h5py`_ or `h5pyd`_, without relying on the Unidata\nnetCDF library.\n\n.. _netCDF4: https://docs.unidata.ucar.edu/netcdf-c/current/file_format_specifications.html#netcdf_4_spec\n.. _h5py: https://www.h5py.org/\n.. _h5pyd: https://github.com/HDFGroup/h5pyd\n\n.. why-h5netcdf\n\nWhy h5netcdf?\n-------------\n\n- It has one less binary dependency (netCDF C). If you already have h5py\n  installed, reading netCDF4 with h5netcdf may be much easier than installing\n  netCDF4-Python.\n- We've seen occasional reports of better performance with h5py than\n  netCDF4-python, though in many cases performance is identical. For\n  `one workflow`_, h5netcdf was reported to be almost **4x faster** than\n  `netCDF4-python`_.\n- Anecdotally, HDF5 users seem to be unexcited about switching to netCDF --\n  hopefully this will convince them that netCDF4 is actually quite sane!\n- Finally, side-stepping the netCDF C library (and Cython bindings to it)\n  gives us an easier way to identify the source of performance issues and\n  bugs in the netCDF libraries/specification.\n\n.. _one workflow: https://github.com/Unidata/netcdf4-python/issues/390#issuecomment-93864839\n.. _xarray: https://github.com/pydata/xarray/\n\nInstall\n-------\n\nEnsure you have a recent version of h5py installed (I recommend using `conda`_ or\nthe community effort `conda-forge`_).\nAt least version 3.0 is required. Then::\n\nOr if you are already using conda::\n\nNote:\n\nFrom version 1.2. h5netcdf tries to align with a `nep29`_-like support policy with regard\nto it's upstream dependencies.\n\n.. _conda: https://conda.io/\n.. _conda-forge: https://conda-forge.org/\n.. _nep29: https://numpy.org/neps/nep-0029-deprecation_policy.html\n\nUsage\n-----\n\nh5netcdf has two APIs, a new API and a legacy API. Both interfaces currently\nreproduce most of the features of the netCDF interface, including the ability\nto write NETCDF4 and NETCDF4_CLASSIC formatted files. Support for operations\nthat rename or delete existing objects is still missing, and patches would be\nvery welcome.\n\nNew API\n~~~~~~~\n\nThe new API supports direct hierarchical access of variables and groups. Its\ndesign is an adaptation of h5py to the netCDF data model. For example:\n\n.. code-block:: python\n\nNotes:\n\n- Automatic resizing of unlimited dimensions with array indexing is not available.\n- Dimensions need to be manually resized with ``Group.resize_dimension(dimension, size)``.\n- Arrays are returned padded with ``fillvalue`` (taken from underlying hdf5 dataset) up to\n  current size of variable's dimensions. The behaviour is equivalent to netCDF4-python's\n  ``Dataset.set_auto_mask(False)``.\n\nLegacy API\n~~~~~~~~~~\n\nThe legacy API is designed for compatibility with `netCDF4-python`_. To use it, import\n``h5netcdf.legacyapi``:\n\n.. _netCDF4-python: https://github.com/Unidata/netcdf4-python\n\n.. code-block:: python\n\nThe legacy API is designed to be easy to try-out for netCDF4-python users, but it is not an\nexact match. Here is an incomplete list of functionality we don't include:\n\n- Utility functions ``chartostring``, ``num2date``, etc., that are not directly necessary\n  for writing netCDF files.\n- h5netcdf variables do not support automatic masking or scaling (e.g., of values matching\n  the ``_FillValue`` attribute). We prefer to leave this functionality to client libraries\n  (e.g., `xarray`_), which can implement their exact desired scaling behavior. Nevertheless\n  arrays are returned padded with ``fillvalue`` (taken from underlying hdf5 dataset) up to\n  current size of variable's dimensions. The behaviour is equivalent to netCDF4-python's\n  ``Dataset.set_auto_mask(False)``.\n\n.. _invalid netcdf:\n\nInvalid netCDF files\n~~~~~~~~~~~~~~~~~~~~",
      "word_count": 495
    },
    {
      "chunk_id": "h5netcdf::chunk_1",
      "text": "h5py implements some features that do not (yet) result in valid netCDF files:\n\n- Data types:\n- Arbitrary filters:\n\nBy default [#]_, h5netcdf will not allow writing files using any of these features,\nas files with such features are not readable by other netCDF tools.\n\nHowever, these are still valid HDF5 files. If you don't care about netCDF\ncompatibility, you can use these features by setting ``invalid_netcdf=True``\nwhen creating a file:\n\n.. code-block:: python\n\n# avoid the .nc extension for non-netcdf files\n  f = h5netcdf.File(\"mydata.h5\", invalid_netcdf=True)\n  ...\n\n# works with the legacy API, too, though compression options are not exposed\n  ds = h5netcdf.legacyapi.Dataset(\"mydata.h5\", invalid_netcdf=True)\n  ...\n\nIn such cases the `_NCProperties` attribute will not be saved to the file or be removed\nfrom an existing file. A warning will be issued if the file has `.nc`-extension.\n\n.. rubric:: Footnotes\n\n.. [#] h5netcdf we will raise ``h5netcdf.CompatibilityError``.\n\nDecoding variable length strings\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nh5py 3.0 introduced `new behavior`_ for handling variable length string.\nInstead of being automatically decoded with UTF-8 into NumPy arrays of ``str``,\nthey are required as arrays of ``bytes``.\n\nThe legacy API preserves the old behavior of h5py (which matches netCDF4),\nand automatically decodes strings.\n\nThe new API matches h5py behavior. Explicitly set ``decode_vlen_strings=True``\nin the ``h5netcdf.File`` constructor to opt-in to automatic decoding.\n\n.. _new behavior: https://docs.h5py.org/en/stable/strings.html\n\n.. _phony dims:\n\nDatasets with missing dimension scales\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\nBy default [#]_ h5netcdf raises a ``ValueError`` if variables with no dimension\nscale associated with one of their axes are accessed.\nYou can set ``phony_dims='sort'`` when opening a file to let h5netcdf invent\nphony dimensions according to `netCDF`_ behaviour.\n\n.. code-block:: python\n\n# mimic netCDF-behaviour for non-netcdf files\n  f = h5netcdf.File(\"mydata.h5\", mode=\"r\", phony_dims=\"sort\")\n  ...\n\nNote, that this iterates once over the whole group-hierarchy. This has affects\non performance in case you rely on laziness of group access.\nYou can set ``phony_dims='access'`` instead to defer phony dimension creation\nto group access time. The created phony dimension naming will differ from\n`netCDF`_ behaviour.\n\n.. code-block:: python\n\nf = h5netcdf.File(\"mydata.h5\", mode=\"r\", phony_dims=\"access\")\n  ...\n\n.. rubric:: Footnotes\n\n.. [#] Keyword default setting ``phony_dims=None`` for backwards compatibility.\n\n.. _netCDF: https://docs.unidata.ucar.edu/netcdf-c/current/interoperability_hdf5.html\n\nTrack Order\n~~~~~~~~~~~\n\nAs of h5netcdf 1.1.0, if h5py 3.7.0 or greater is detected, the ``track_order``\nparameter is set to ``True`` enabling `order tracking`_ for newly created\nnetCDF4 files. This helps ensure that files created with the h5netcdf library\ncan be modified by the netCDF4-c and netCDF4-python implementation used in\nother software stacks. Since this change should be transparent to most users,\nit was made without deprecation.\n\nSince track_order is set at creation time, any dataset that was created with\n``track_order=False`` (h5netcdf version 1.0.2 and older except for 0.13.0) will\ncontinue to opened with order tracker disabled.\n\nThe following describes the behavior of h5netcdf with respect to order tracking\nfor a few key versions:",
      "word_count": 465
    },
    {
      "chunk_id": "h5netcdf::chunk_2",
      "text": "- Version 0.12.0 and earlier, the ``track_order`` parameter`order was missing\n  and thus order tracking was implicitly set to ``False``.\n- Version 0.13.0 enabled order tracking by setting the parameter\n  ``track_order`` to ``True`` by default without deprecation.\n- Versions 0.13.1 to 1.0.2 set ``track_order`` to ``False`` due to a bug in a\n  core dependency of h5netcdf, h5py `upstream bug`_ which was resolved in h5py\n  3.7.0 with the help of the h5netcdf team.\n- In version 1.1.0, if h5py 3.7.0 or above is detected, the ``track_order``\n  parameter is set to ``True`` by default.\n\n.. _order tracking: https://docs.unidata.ucar.edu/netcdf-c/current/file_format_specifications.html#creation_order\n.. _upstream bug: https://github.com/h5netcdf/h5netcdf/issues/136\n.. _[*]: https://github.com/h5netcdf/h5netcdf/issues/128\n\n.. changelog\n\nChangelog\n---------\n\n`Changelog`_\n\n.. _Changelog: https://github.com/h5netcdf/h5netcdf/blob/main/CHANGELOG.rst\n\n.. license\n\nLicense\n-------\n\n`3-clause BSD`_\n\n.. _3-clause BSD: https://github.com/h5netcdf/h5netcdf/blob/main/LICENSE",
      "word_count": 120
    }
  ],
  "usage_description": "This library, h5netcdf, is used to enable reading and writing of netCDF4 files directly via HDF5 files using the h5py interface, eliminating the need for the Unidata netCDF library. By leveraging h5py, developers can achieve faster performance and reduced dependencies in their workflows when working with netCDF4 files."
}